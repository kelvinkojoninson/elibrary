var w=function(){var m="#009ef7",p="#f1416c",k="#50cd89";let d,h;const C=async(e,a,t,o,s)=>{const l=document.querySelector(e);if(!l)return;var c=new FormData(l);const r=[],n=[],i=[],y=[];return await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${apiToken}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:c}).then(f=>f.json()).then(f=>{f.data.forEach(u=>{r.push(u.label),n.push(u.counter1),i.push(u.counter2),y.push(u.counter3)})}),{labels:r,datasets:[{label:t,data:n,borderColor:k,backgroundColor:k},{label:o,data:i,borderColor:m,backgroundColor:m},{label:s,data:y,borderColor:p,backgroundColor:p}]}};var g=function(){const e=document.querySelector("#weekly-form"),a=e.querySelector("#weekly-year"),t=e.querySelector("#weekly-week"),o=e.querySelector(".loading"),s=e.querySelector("#weekly-chart");if(!e||!s)return;const l=()=>{o&&(o.style.display="block")},c=()=>{o&&(o.style.display="none")},r=n=>{h&&h.destroy();var i={type:"line",data:n,options:{plugins:{title:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1}},responsive:!0}},y=s.getContext("2d");h=new Chart(y,i)};l(),C("#weekly-form",APP_URL+"/api/transactions/charts?chartType=weekly&year="+a.value+"&week="+t.value,"Weekly Transaction","Weekly Completed Tasks","Weekly Cancelled Tasks").then(n=>{c(),r(n)}).catch(n=>{c(),console.error("An error occurred while fetching weekly transactions:",n)})},b=function(){const e=document.querySelector("#monthly-form"),a=e.querySelector("#monthly-year"),t=e.querySelector(".loading"),o=e.querySelector("#monthly-chart");if(!e||!o)return;const s=()=>{t&&(t.style.display="block")},l=()=>{t&&(t.style.display="none")},c=r=>{d&&d.destroy();var n={type:"line",data:r,options:{plugins:{title:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1}},responsive:!0}},i=o.getContext("2d");d=new Chart(i,n)};s(),C("#monthly-form",APP_URL+"/api/transactions/charts?chartType=monthly&year="+a.value,"Monthly Transaction","Monthly Completed Tasks","Monthly Cancelled Tasks").then(r=>{l(),c(r)}).catch(r=>{l(),console.error("An error occurred while fetching monthly summary:",r)})};return{init:function(){Chart.defaults.font.size=13,Chart.defaults.font.family=KTUtil.getCssVariableValue("--bs-font-sans-serif"),g(),b(),document.querySelector("#monthly-year").addEventListener("change",()=>{b()}),["year","week_number"].forEach(a=>{const t=document.querySelector("#weekly-form").querySelector('select[name="'+a+'"]');t&&t.addEventListener("change",function(o){g()})})}}}();KTUtil.onDOMContentLoaded(function(){w.init()});
