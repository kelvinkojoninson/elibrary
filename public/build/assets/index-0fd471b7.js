var v=function(){const s=async(l,c,i,r)=>{const e=document.querySelector(c);if(!e)return;const n=e.querySelector("form");if(!n)return;const t=e.querySelector('[data-action="submit"]');if(!t)return;const d=n.querySelectorAll("select");t.addEventListener("click",async a=>{a.preventDefault(),t.setAttribute("data-kt-indicator","on"),t.disabled=!0;let o=new FormData(n);o.append("modAction","modUpdate"),o.append("modID",permissions.modID);try{const u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${apiToken}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o}),{ok:g,msg:m}=await u.json();if(!g){Swal.fire({text:m,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}});return}Swal.fire({text:m,icon:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then(p=>{p.isConfirmed&&(i&&n.reset(),!i&&r&&(window.location=r),d.forEach(y=>$(y).val("").trigger("change")))})}catch(u){Swal.fire({text:u.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}finally{t.removeAttribute("data-kt-indicator"),t.disabled=!1}})};var f=function(){var l=document.getElementById("kt_signin_password"),c=document.getElementById("change-password"),i=document.getElementById("kt_view_profile"),r=document.getElementById("update-profile-form"),e=document.getElementById("kt_signin_password_button"),n=document.getElementById("kt_password_cancel"),t=document.getElementById("kt_view_profile_button"),d=document.getElementById("kt_profile_cancel");e.querySelector("button").addEventListener("click",function(){a()}),t.addEventListener("click",function(){o()}),n.addEventListener("click",function(){a()}),d.addEventListener("click",function(){o()});var a=function(){l.classList.toggle("d-none"),e.classList.toggle("d-none"),c.classList.toggle("d-none")},o=function(){i.classList.toggle("d-none"),t.classList.toggle("d-none"),r.classList.toggle("d-none")}};return{init:function(){f(),s(`${APP_URL}/api/users/update`,"#update-profile",!1,`${APP_URL}/profile`),s(`${APP_URL}/api/users/reset-password`,"#change-password",!0,null),s(`${APP_URL}/api/users/delete`,"#kt_modal_add_common",!0,null)}}}();KTUtil.onDOMContentLoaded(function(){v.init()});
