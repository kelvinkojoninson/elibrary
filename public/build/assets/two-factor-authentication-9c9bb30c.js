var m=function(){const s=async()=>{const t=document.querySelector("#kt_modal_two_factor_authentication");if(!t)return;const o=t.querySelector("form");if(!o)return;const e=t.querySelector('[data-action="submit"]');e&&e.addEventListener("click",async i=>{i.preventDefault(),e.setAttribute("data-kt-indicator","on"),e.disabled=!0;let r=new FormData(o);try{const n=await fetch(APP_URL+"/api/users/add-2fa",{method:"POST",headers:{Authorization:`Bearer ${apiToken}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:r}),{ok:u,msg:a}=await n.json();if(!u){Swal.fire({text:a,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}});return}Swal.fire({text:a,icon:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then(l=>{l.isConfirmed&&location.reload()})}catch(n){Swal.fire({text:n.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}finally{e.removeAttribute("data-kt-indicator"),e.disabled=!1}})},c=async()=>{const t=document.querySelector('[data-kt-element="remove-submit"]');t&&t.addEventListener("click",async o=>{o.preventDefault(),t.setAttribute("data-kt-indicator","on"),t.disabled=!0;try{const e=await fetch(APP_URL+"/api/users/remove-2fa",{method:"POST",headers:{Authorization:`Bearer ${apiToken}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}),{ok:i,msg:r}=await e.json();if(!i){Swal.fire({text:r,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}});return}Swal.fire({text:r,icon:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then(n=>{n.isConfirmed&&location.reload()})}catch(e){Swal.fire({text:e.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}finally{t.removeAttribute("data-kt-indicator"),t.disabled=!1}})};return{init:function(){s(),c()}}}();KTUtil.onDOMContentLoaded(function(){m.init()});
